var czrapp=czrapp||{};!function(a,b){var c={init:function(){this.namespace="tc-sticky-header",this._sticky_candidate_sel=".navbar-to-stick",this._cache_els(),this._didScroll=!1,this._lastScroll=0,this._sticky_trigger=!1,this._mobile_viewport=991,this.collapse_show_selector="show",this.debounced_resize_actions=_.debounce(function(){var b=this;this._maybe_move_utils(),this.stickyHeaderMaybeToggling(),a.each(a(b._sticky_navbar_toggleable_selector+"."+b.collapse_show_selector),function(){b._stickyHeaderLimitMobileMenu("resize",a(this))})},300),this.transitionEnd="transitionend webkitTransitionEnd otransitionend oTransitionEnd MSTransitionEnd"},_cache_els:function(){this.$_sticky_candidate=b.$_tcHeader.find(this._sticky_candidate_sel),this._d_sticky_candidate=b.$_tcHeader.hasClass("header-absolute")?"overlaps":"pushes",this._sticky_candidate=this._d_sticky_candidate,this._sticky_mobile_class="czr-sticky-mobile",this.is_sticky_mobile=b.$_tcHeader.hasClass(this._sticky_mobile_class),this._fixed_classes="navbar-sticky",this._lastScroll=0,this.$_sticky_placeholder=null,this._sticky_mobile_selector="."+this._sticky_mobile_class,this._sticky_navbar_toggleable_selector=this._sticky_mobile_selector+" [class*=navbar-toggleable-] .navbar-collapse",this._utils_selector=".primary-nav__utils",this._branding_selector=".branding__container",this._main_nav_selector=".primary-navbar__wrapper .primary-nav__nav",this._to_move_utils_selector=".tc-header[class*=v-logo_]"},triggerStickyHeaderLoad:function(){CZRParams.stickyHeader&&b.$_body.addClass("tc-sticky-header").trigger("sticky-enabled-on-load")},stickyHeaderEventListener:function(){var c=this;b.$_body.on("sticky-enabled-on-load",function(){c.stickyHeaderEventHandler("on-load")}),b.$_body.on("sticky-enable",function(){c.stickyHeaderEventHandler("on-stick")}).on("sticky-disable",function(){c.stickyHeaderEventHandler("on-unstick")}).on("sticky-enabled",function(){c.stickyHeaderEventHandler("on-enabled")}),b.$_window.scroll(function(){c.stickyHeaderEventHandler("scroll")}),b.$_window.on("tc-resize",function(){c.debounced_resize_actions()}),b.$_body.on("show.bs.collapse hidden.bs.collapse",this._sticky_navbar_toggleable_selector,function(a){c._stickyHeaderLimitMobileMenu(a)}),b.$_body.on("shown.bs.collapse",this._sticky_navbar_toggleable_selector,function(){c._initCustomScrollbar(a(this))}),b.$_body.on(this.transitionEnd,this._sticky_candidate_sel,function(b){c.$_sticky_candidate[0]==b.target&&c._stickyHeaderLimitMobileMenu("resize",a(c._sticky_navbar_toggleable_selector+"."+c.collapse_show_selector))})},stickyHeaderMaybeToggling:function(){b.matchMedia(this._mobile_viewport)?this.is_sticky_mobile?this._sticky_candidate="pushes":this._isStickyEnabled()&&b.$_body.trigger("sticky-disable").removeClass("tc-sticky-header").addClass("tc-sticky-suspended"):(this.is_sticky_mobile?this._sticky_candidate=this._d_sticky_candidate:!this._isStickyEnabled()&&b.$_body.hasClass("tc-sticky-suspended")&&b.$_body.addClass("tc-sticky-header").removeClass("tc-sticky-suspended"),this.stickyHeaderEventHandler("scroll"))},stickyHeaderEventHandler:function(a){if(this._isStickyEnabled()){var b=this;switch(a){case"on-load":this.stickyHeaderMaybeToggling();break;case"scroll":this._didScroll||(this._didScroll=!0,window.requestAnimationFrame(function(){b._sticky_header_scrolling_actions()}));break;case"on-stick":this._on_sticky_enable();break;case"on-unstick":this._on_sticky_disable();break;case"on-enabled":setTimeout(function(){b.$_sticky_candidate.removeClass("animating")},10)}}},_isStickyEnabled:function(){return!!b.$_body.hasClass("tc-sticky-header")},_toggleStickyAt:function(){if(this._sticky_trigger)return this._sticky_trigger;var a=this.$_sticky_placeholder&&this.$_sticky_placeholder[0].getBoundingClientRect().height?this.$_sticky_placeholder:this.$_sticky_candidate;return a.outerHeight()+a.offset().top+50},_isStickyOn:function(){return b.$_body.hasClass("sticky-enabled")},_getScroll:function(){return window.pageYOffset||b.$_window.scrollTop()},_isScrollingDown:function(){return this._lastScroll<this._getScroll()},_sticky_header_scrolling_actions:function(){var a=this._getScroll();"overlaps"==this._sticky_candidate&&this._isScrollingDown()&&!this._isStickyOn()&&this._set_sticky_placeholder();var c=this._toggleStickyAt();!this._isStickyOn()&&a>=c?b.$_body.trigger("sticky-enable"):this._isStickyOn()&&c>a&&b.$_body.trigger("sticky-disable"),this._lastScroll=this._getScroll(),this._didScroll=!1},_on_sticky_enable:function(){"pushes"==this._sticky_candidate&&this._set_sticky_placeholder(),this._maybe_move_utils(this._main_nav_selector),this.$_sticky_candidate.addClass("animating").addClass(this._fixed_classes),b.$_body.addClass("sticky-enabled").removeClass("sticky-disabled").trigger("sticky-enabled")},_on_sticky_disable:function(){var c=this;this._reset_sticky_placeholder(),this._maybe_move_utils(this._branding_selector),this.$_sticky_candidate.removeClass(this._fixed_classes),b.$_body.removeClass("sticky-enabled").addClass("sticky-disabled").trigger("sticky-disabled"),a.each(a(c._sticky_navbar_toggleable_selector),function(){c._stickyHeaderLimitMobileMenu("resize",a(this))})},_set_sticky_placeholder:function(){this.$_sticky_placeholder||(b.$_tcHeader.prepend('<div id="sticky-placeholder"></div>'),this.$_sticky_placeholder=a("#sticky-placeholder")),this.$_sticky_placeholder.css("height",this.$_sticky_candidate[0].getBoundingClientRect().height)},_reset_sticky_placeholder:function(){this.$_sticky_placeholder&&this.$_sticky_placeholder.length&&this.$_sticky_placeholder.css("height","0")},_maybe_move_utils:function(c){b.matchMedia(this._mobile_viewport)||(c?a(c,this._to_move_utils_selector).append(a(this._utils_selector)):a(this._isStickyOn()?this._main_nav_selector:this._branding_selector,this._to_move_utils_selector).append(a(this._utils_selector)))},_stickyHeaderLimitMobileMenu:function(c,d){var e=this;if(this.is_sticky_mobile&&(d=d?d:[],d=!d.length&&"undefined"!=typeof c&&c.target?a(c.target):d,d.length&&("resize"!=c||d.hasClass("show")))){if(c&&"hidden"==c.type)return void this._resetHeaderLimitMobileMenu(d);if(b.matchMedia(this._mobile_viewport)){var f="undefined"==typeof window.innerHeight?window.innerHeight:b.$_window.height(),g=f-d.closest("div").offset().top+this._getScroll();d.css("max-height",g+"px").addClass("limited-height"),d.is("[class*=mCustomScrollbar]")?d.mCustomScrollbar("update"):d.hasClass("show")&&d.hasClass("mCS_destroyed")&&e._initCustomScrollbar(d)}else this._resetHeaderLimitMobileMenu(d)}},_resetHeaderLimitMobileMenu:function(b){b=b||a(this._sticky_navbar_toggleable_selector),b.length&&(b.removeClass("limited-height").css({"max-height":"",overflow:""}),b.is("[class*=mCustomScrollbar]")&&b.mCustomScrollbar("destroy"))},_initCustomScrollbar:function(c){"function"==typeof a.fn.mCustomScrollbar&&c.mCustomScrollbar({theme:b.$_body.hasClass("header-skin-light")?"minimal-dark":"minimal"})}};b.methods.Czr_StickyHeader={},a.extend(b.methods.Czr_StickyHeader,c)}(jQuery,czrapp);